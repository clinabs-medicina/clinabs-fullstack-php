function uploadReceita(){let e=$("#formPrescricao").data("id");$('input[type="file"]').unbind("change");let t=document.createElement("input");t.type="file",t.accept="application/pdf",t.name="doc_receita",t.addEventListener("change",function(){let t=new FormData;t.append("doc_receita",this.files[0],this.files[0].name),t.append("agenda_token",e),fetch("/form/receita.upload.php",{method:"POST",body:t}).then(e=>e.json()).then(e=>{toast(e.text,e.status).then(function(){window.location.reload()})}).catch(e=>{Swal.fire({text:"Ocorreu um Erro ao Enviar a Receita",icon:"warning"})})}),t.click()}function validateForm(){$(".validate-form").find("#cpf").unmask(),$(".validate-form").find("#cpf").mask("000.000.000-00",{placeholder:"___.___.___-__",onComplete:function(e){$.get(`/forms/paciente.exists.php?cpf=${e}`).done(function(e){!0===e.exists?($(".validate-form").find("#cpf").addClass("input-error"),Swal.fire({title:"Aten\xe7\xe3o",text:"Voc\xea j\xe1 est\xe1 Cadastrado ou outra pessoa est\xe1 utilizando algum destes dados.",icon:"warning",allowOutsideClick:!1}).then(function(){$(".validate-form").find("#cpf").val(""),$(".validate-form").find("#cpf").focus()})):($(".validate-form").find("#cpf").removeClass("input-error"),$(".validate-form").find("#cpf").prop("disabled",!0),$(".validate-form").find("#nome_completo").focus())})}})}$("document").ready(function(){validateForm(),$(".input-upload-doc").unbind("change");let e=async function(e,t){return await fetch("/form/form.uploads.docs.php",{method:"PUT",body:e}).then(e=>e.json()).then(e=>{t(e)}).catch(e=>{toast(e,"error")})};$(".input-upload-doc").on("change",function(){let t=$(this).closest(".anexo-item"),a=$(t).find("img"),i=this.id;return e(this.files[0],function(e){"success"===e.status&&("image/png"===e.mime||"image/jpg"===e.mime||"image/jpeg"===e.mime?($(a).attr("src","/assets/images/ico-doc-img.svg"),$(`input[name="${i}"]`).val(e.path)):"application/pdf"===e.mime?($(a).attr("src","/assets/images/ico-doc-pdf.svg"),$(`input[name="${i}"]`).val(e.path)):Swal.fire({title:"Aten\xe7\xe3o",icon:"warning",text:"Arquivo n\xe3o suportado."})),toast(e.text,e.status)}),!1}),$('select[data-search="true"]').select2()});